* Файл - это совокупность данных, доступ к которой осуществляется по имени.

* ОС семейства Unix трактуют понятие файла более широко - файлом там называется вообще
любой объект, имеющий имя в файловой системе.
Правда каталоги, внешние устройства называются в данном случае специальными файлами.

* Как правило, хранят также дату создания файла, дату его последней модификации, местоположение на диске,
индентификатор хозяина этого файла, права доступа к нему других пользователей.
Эта информация обычно хранится не в самом файле, а в специальной структуре данных - иноде, метафайле и т.д.

* Совокупность каталогов и других метаданных, т.е. системных структур данных, отслеживающих
размещение файлов на диске и свободное дисковое пространство, называется файловой системой (ФС).

* Операция open() "открывает" файл, устанавливая соединение между программой и файлом.
При этом программа получает целое число, дескриптор, который идентифицирует данное соединение.
Фактически это индекс в системной таблице открытых файлов для данной задачи.
Все остальные операции используют этот индекс для ссылки на файл.

* В мире ОС UNIX по историческим причинам термин "файловая система" является перегруженным, обозначая одновременно иерархию каталогов и файлов и часть ядра, 
которая управляет каталогами и файлами.

* Под иерархией понимается дерево с вершиной root, промежуточными вершинами в виде каталогов и листьев в виде пустых каталогов и файлов.

* Структура файловой системы:
Файловая система обычно размещается на дисках или других устройствах внешней памяти, имеющих блочную структуру.
Кроме блоков, сохраняющих каталоги и файлы, во внешей памяти поддерживается еще несколько служебных областей.

Наиболее известны традиционная система UNIX System V и UNIX BSD (ufs).

Вот как выглядит файловая система UNIX System V:

Boot-блок
--------------
Суперблок
--------------
Список i-узлов
--------------
Блоки данных

-Boot-блок содержит программу раскрутки, которая служит для первоначального запуска ОС UNIX.
-Суперблок - это наиболее ответственная область файловой системы, содержащая информацию, которая
необходима для работы с файловой системой в целом.
Суперблок содержит список свободных inodes.
-Блок группы цилиндров содержит число inodes, специфицированных в списке inodes для данной группы цилиндров, и число
блоков данных, которые связаны с этими inodes. Размер блока группы цилиндров зависит от размера файловой системы.
-Список i-узлов содержит список i-узлов, соответствующих файлам данной файловой системы. Максимальное число файлов,
которые могут быть созданы в файловой системе, определяется числом доступных i-узлов.
В i-узле хранится информация, описывающая файл: режимы доступа к файлу, время создания и последней модификации, 
идентификатор польщователя и идентификатор группы создателя файла, описание блочной структуры файла и т.д.
-Блоки данных: в этой части файловой системы хранятся реальные данные файлов.

* Файлы любой файловой системы становятся доступными только после "монтирования" этой файловой системы.
Файлы "не смонтированной" файловой системы не являются видимыми операционной системой.

Для монтирования ФС используется системный вызов mount. Под монтированием обозначают следующее:
в имеющемся к моменту монтирования дереве каталогов и файлов должен иметься листовой узел - пустой каталог
(точка монтирования). В любой файловой системе имеется корневой каталог. Во время выполнения системного вызова mount
корневой каталог монтируемой файловой системы совмещается с каталогом - точкой монтирования, в результате чего
образуется новая иерархия с полными именами каталогов и файлов.

Смонтированная файловая система впоследствии может быть отсоединена от общей иерархии с использованием
системного вызова umount.

* Адресация блоками позволяет использовать достаточно короткие адреса, покрывая при этом целые
терабайты данных.

* Кластеры - логические блоки, состоящие из нескольких секторов.

-------2 кластера------------|-----Кластер---------|--------Фрагментированный кластер|
	Файл 1			Файл 2			Конец 1 | Конец 2 | Свободно
--------------------------------------------------------------------------------------
			Субаллокация блоков


Субаллокация требует от файловой системы поддержания открытых блоков на случай, если пользователь
увеличивает размер файла, хвост которого лежит во фрагментированном блоке.

Каталог - таблица преобразования имен в адреса.
Иногда в каталоге лежит лишь имя файла и указатель на его управляющую структуру, например, инод.

* Сложные файловые системы
Обычно файловая система начинается с суперблока.
Он хранит информацию о размерах дискового тома, отведенного под ФС, указатели на начало системных структур данных и другую
информацию, зависющую от типа ФС.























