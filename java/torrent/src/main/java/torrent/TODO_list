https://www.cs.swarthmore.edu/~aviv/classes/f12/cs43/labs/lab5/lab5.pdf
https://translatedby.com/you/bittorrent-protocol-specification-v1-0-in-detail/into-ru/

1. Добавить keep-alive сообщения и их обработку. 2 minutes
2. Продумать что делать в ситуации, когда какой-то из сидов отваливается
3. Реализовать все команды из задания, динамически определять,
   кто чем владеет
4. В UploadHandler запись тоже должна
происходить по селекту. Например, мы пишем какой-то кусок данных, а в
это время по таймеру мы туда еще и четыре нуля прокидываем. Это нехорошо.
Хотя бы блокирование надо поставить для корректности, но это медленно, все
должно быть через Selector

Так. Вообще говоря, загрузка должна полностью идти в отдельном треде.
А в другом треде общение с пользователем.
Да.
Короче. Вариант следующий. Мы прям берем и завершаем поток загрузки.
Но сохраняем инфу о кусках, которые скачали прямо в торрент-клменте.

seed будет принимать keep-alive сообщения в селекте.
Каждый раз, когда он его получает, он замеряет время.
В то же время работает таймер, который периодически
делает рассылку этих keep-alive сообщений и проверяет
время последних пришедших, если нужно, закрывает соединения.
Примерно похожее надо сделать в личах.

Так, окей, прием keep-alive сообщений был довольно элементарный.
Осталось впаять туда таймеры.
Так... Хотелось бы еще вот что продумать.
Как сид все это будет делать --- понятно.
Только надо сделать хэшмапу, все таки для каждого соединения должна
быть своя собственная статистика по keep-alive.

Таймеры нужны обящательно. Выгрузка кусков может занять время -
но это, наверное, не повод убивать соединение.
Во время выгрузки все равно можно слать keep-alive.

Вот с личом вообще непонятно.
Хотя нет. DownloadManager всем руководит.
У него есть единый таймер. При срабатывании ВСЕМ активным сидам
прокидывается keep-alive.
Он может это сделать сам.
В своем потоке.
